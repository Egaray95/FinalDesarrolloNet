<!DOCTYPE html>
<html>
<head>


    <meta charset="UTF-8">

    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <link rel="stylesheet" href="~/Content/css/styles.css">

    <title>@ViewBag.Title - Proyecto Clinica UTP</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")

</head>
<body>

    <div class="wrapper hover_collapse">
        <div class="top_navbar">
            <div class="logo">Clinica<span>JS</span></div>




            <div class="menu">
                <div class="hamburger">
                    <i class="fas fa-bars"></i>
                </div>

                <div class="profile_wrap">
                    <div class="profile">
                        <img src="profile.png" alt="profile_pic">
                        <span class="name">Alvaro Mamani</span>
                        <span class="icon">
                            <i class="fas fa-angle-down"></i>
                        </span>
                    </div>
                </div>
            </div>

        </div>
        <div class="sidebar">
            <div class="sidebar_inner">
                <ul class="principal">


                    @{


                        ClinicaP2.Models.BDCLINICAEntities bd = new ClinicaP2.Models.BDCLINICAEntities();



                        var query = from u in bd.ConfigMenu
                                    join ur in bd.ConfigButton on u.ConfButton equals ur.ConfButId
                                    where u.ConfTipTrabaja == 1 && ur.ConfPadre == null

                                    select new 
                                    {
                                        nombre= ur.ConfButName,
                                        codigopadre =ur.ConfButId
                                    };

                        foreach (var item in query)
                        {





                            <li>
                                                    <a href="#">
                                                        <span class="icon"><i class="fas fa-chess"></i></span>
                                                        <span class="text">@item.nombre</span>

                                                        @{

                                                            var listahijos = from a in bd.ConfigButton where a.ConfPadre == item.codigopadre select a;

                                                            foreach (var item2 in listahijos)
                                                            {
                                                                <ul>


                                                                    @Html.ActionLink(item2.ConfButName, item2.ConfFuncion, item2.ConfControlador)

                                                                </ul>
                                                            }
                                                        }


                                                    </a>
                            </li>


                        }



                    }


                </ul>
            </div>
        </div>

        <div class="main_container">
            <div class="container">
                @RenderBody()
                <hr />
                <footer>
                    <p>&copy; @DateTime.Now.Year - Proyecto Clinica UTP</p>
                </footer>
            </div>
        </div>

    </div>


    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @RenderSection("scripts", required: false)
    <script src="~/Content/js/scripts.js"></script>

</body>
</html>
